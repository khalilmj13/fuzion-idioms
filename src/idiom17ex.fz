node(T type,
     val T,
     children Sequence (node T)) is

  redef asString => (asStrings 0).asString "\n"

  asStrings(d i32) =>
    ["+-" + $val] ++ (children.flatMapSequence String (c->c.asStrings d+1)).map s->"| $s"

feuille(val String) => node val (lists.empty (node String))

t := node "C" [feuille "C++",
               feuille "C#" ,
               feuille "Go" ,
               node "Java" [feuille "Scala",
                            feuille "Kotlin"],
               node "Perl" [feuille "Ruby",
                            feuille "Raku"],
               node "Python" [feuille "Julia",
                              feuille "Nim"  ]
              ]

say t
