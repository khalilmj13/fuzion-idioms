t := if s.endsWith p
       s.substring 0 s.byteLength-p.byteLength
     else
       s
