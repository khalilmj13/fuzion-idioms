ex128 is

  node(name String, children Sequence node) is

  breadth_first_traverse(f node -> unit, root node) =>
    breadth_first_traverse(queue Sequence node) unit is
      match queue.asList
        nil =>
        c Cons =>
          f c.head
          breadth_first_traverse (c.tail ++ c.head.children)
    breadth_first_traverse [root]

  # World
  # ├─Europe
  # │ ├─Belarous
  # │ ├─Portugal
  # ├─Asia
  # ├─Oceania
  # NYI type inference: [] should work for ((Sequence node).type.empty)
  five := node "Belarus" ((Sequence node).type.empty)
  six := node "Portugal" ((Sequence node).type.empty)
  two := node "Europe" [five, six]
  three := node "Asia" ((Sequence node).type.empty)
  four := node "Oceania" ((Sequence node).type.empty)
  one := node "World" [two, three, four]

  breadth_first_traverse (node -> say node.name) one
